#!/bin/bash

set +x 

if [ $# -eq 0 ] || [ $1 = "run" ]; then
    exec ags run
    exit
fi
if [ $1 = "restart" ]; then
    wam quit
    exec ags run
    exit
fi

if [ $1 = "-I" ] || [ $1 = "inspect" ]; then
    exec ags inspect -i wam
fi
#
# Reconstruct the arguments with quotes preserved
out=""
for arg in "$@"; do
    case "$arg" in
        *" "*)
            out="$out \"$arg\""
            ;;
        *' '*)
            out="$out \"$arg\""
            ;;
        *)
            out="$out $arg"
            ;;
    esac
done

ags request -i wam "${out# }"
